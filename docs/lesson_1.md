# 一、计算机系统概述

## 冯.诺依曼结构主要思想

### 发展历史

- 第一台通用电子计算机：1946年，`ENIAC（Electronic Numerical Integrator And Computer）`；
- 第一台存储程序计算机：1949年，`EDSAC（Electronic Delay Storage Auto-matic Calculator）`；
- 1951年，冯.诺伊曼等人在普林斯顿高等研究院（the Institute of Advance Study at Princeton, IAS）设计的存储程序计算机`IAS`设计完成：
  - 该计算机结构被称为冯.诺依曼结构；
  - 该结构中最重要的思想为存储程序（Stored-program）；
  - 冯.诺依曼结构的计算机被称为冯.诺伊曼机器（Von Neumann Machine)；
  - IAS是现代计算机的原型机。

### 冯.诺依曼结构模型

![冯.诺依曼结构模型](https://raw.githubusercontent.com/Hugsy19/Picbed/master/img/20210403220646.png)

- 计算机由以下五个基本部件组成：
  - **运算器**：进行各种算数、逻辑运算；
  - **控制器**：取出指令来执行；
  - **存储器**：同时存放数据和指令，且能区分两者；
  - **输入**、输出：外部通信。
- 内部用二进制表示指令和数据；
  - 指令由操作码和地址码组成。
- 采用存储程序的工作方式。

## 现代计算机结构模型及工作原理

### 结构模型

![现代计算机结构模型](https://raw.githubusercontent.com/Hugsy19/Picbed/master/img/20210403220951.png)

- **ALU（Arithmetic and Logic Unit）** 算术逻辑部件
- **GPRs（General Purpose Register）** 通用寄存器组
- **MDR（Memory Data Register）** 数据寄存器
- **MAR（Memory Address Register）** 地址寄存器
- **PC（Program Counter）** 程序计数器
- **IR（Instruction Register）** 指令寄存器

### 工作原理

- 程序执行前：数据和指令都放在存储器中，程序起始地址置PC；
- 开始执行程序：根据PC取指令->指令译码->取操作数->指令执行->回写结果->修改PC->执行下一条指令。

## 程序开发和执行过程

### 程序开发语言

- 机器级语言：
  - 机器语言：最早的程序，记录在纸带或卡带上；
  - 汇编语言：由汇编指令构成，汇编指令是由助记符和标号组成的指令。
    - 通过`汇编程序`转换为机器语言。
- 高级语言：
  - 与具体机器结构无关；
  - 面向算法描述；
  - 最终要转换为机器语言程序，转换方式有：
    - **编译程序（Compiler）**：转换为机器级目标程序，执行时只要启动目标程序，如`C/C++`；
    - **解释程序（Interpreter）**：逐条翻译成机器指令并立即执行，不生产目标文件，如`Python`。

### 程序执行过程

![典型的程序转换处理过程](https://raw.githubusercontent.com/Hugsy19/Picbed/master/img/20210403221640.png)

- **cpp (C Pre-Processor）** 预处理器
- **ccl (C Compiler）** 编译器
- **as（Assembler）** 汇编器
- **ld（Link Editor）** 链接器
  
## 编程语言与计算机系统层次

- **机器语言**：应用程序->`指令集体系架构（Instruction Set Architecture，ISA）`>计算机硬件
- **汇编程序**：应用程序->汇编程序->操作系统->ISA>计算机硬件
- **高级语言**：应用程序->语言处理系统->操作系统->ISA->计算机硬件
  - **语言处理系统**：包括编译、汇编等语言处理程序，及库函数、调试等运行时系统；
  - **操作系统**：包括人机交互界面，提供服务功能的内核例程。
- 语言的发展是个不断**抽象**的过程。

## 现代计算机系统层次结构

### 计算机系统抽象层次

![计算机系统抽象层次](https://raw.githubusercontent.com/Hugsy19/Picbed/master/img/20210403221956.png)

-  **上层是下层的抽象，下层是上层的实现，底层为上层提供支撑环境**；
-  程序的执行结果不仅取决于`算法及程序的编写`，更与`语言处理系统`、`操作系统`、`ISA`、`微体系架构`息息相关。

### 用户层次结构

![用户层次结构](https://raw.githubusercontent.com/Hugsy19/Picbed/master/img/20210403222207.png)

- `最终用户`工作在`应用程序`提供的最上面的抽象层；
- `系统管理员`工作在由`操作系统`提供的抽象层；
- `应用程序员`工作在由`语言处理系统`提供的抽象层 ；
- `系统程序员`工作在`ISA`提供的抽象层；
- `ISA`是对硬件的抽象，所有软件的功能都建立在该层次上。

### ISA

- 是一种**规约（Specification）**，规定了硬件的使用方式：
  - 可执行指令的集合，包括**指令格式**、**操作种类**、各操作对应的操作数；
  - 指令可接受的**操作数类型**；
  - 操作数能存放的**寄存器组的结构**、包括寄存器名称、编号、长度、用途；
  - 操作数能存在的**存储空间大小**、**编址方式（大小端）**；
  - 指令获取操作数的**寻址方式**；
  - 指令执行过程的**控制方式**。
- 是通用计算机系统**必不可少**的抽象层。